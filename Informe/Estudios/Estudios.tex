%\input{../Informe/Header.tex}

%\begin{document}

En esta sección se analiza la confiabilidad de los elementos de \textit{hardware} y \textit{software}, exponiendo en cada caso los criterios utilizados. A su vez se separa la parte de \textit{hardware} observando cada parte de manera individual para luego obtener un resultado en conjunto.

\Subsection{Hardware}	
El estudio se lleva a cabo según la norma MIL-HDBK-217F, la cual estima la cantidad de fallas en unidad de tiempo para diferentes tipos de componentes electrónicos. Este estándar tiene en cuenta factores como las condiciones de uso, temperatura y trayectoria del fabricante.

El primer paso consiste en realizar un gráfico de todos los módulos considerados críticos que garantizan las funcionalidades fundamentales del producto. Esto se presenta en la Figura (\ref{fig:criticos}).
\begin{figure}[H]
	\centering
	\includegraphics[width=0.9\linewidth,page=1]{ImagenesEstudios/ModulosCriticos}		
	\caption{Módulos críticos de funcionamiento.}
	\label{fig:criticos}
\end{figure}
Se calcula una estimación de la confiabilidad de cada módulo utilizando una estrategia \quotes{Top-Down}. Se encuentra la tasa de falla de cada submódulo mediante un proceso multiplicativo a la tasa de fallos base provista por las distintas cargas a las que son sometidos los componentes.
No se cuenta con redundancias, por lo que el valor de confiabilidad del módulo estará dado por la confiabilidad en serie de cada uno de sus componentes.

\begin{table}[H]
\centering
\begin{tabular}{|c|c|}
\hline
\textbf{Tipo de componente}   & \textbf{Cálculo de tasa de fallos $\left[\frac{\text{failures}}{10^6 \cdot \text{hour}}\right]$}                                                                               \\ \hline
\textbf{Resistencia}          & $\lambda_p \ = \ \lambda_b \ \cdot \  \pi_T \ \cdot \ \pi_P \ \cdot \ \pi_S \ \cdot \ \pi_Q \ \cdot \ \pi_E$                                                                   \\ \hline
\textbf{Capacitor}            & $\lambda_p \ = \ \lambda_b \ \cdot \  \pi_T \ \cdot \ \pi_C \ \cdot \ \pi_V \ \cdot \ \pi_{SR} \ \cdot \ \pi_Q \ \cdot \ \pi_E  $                                              \\ \hline
\textbf{IC DHT-22}            & $\lambda_p \ = \  (C_1 \ \cdot \ \pi_T \ + \ C_2 \ \cdot \ \pi_E ) \cdot \ \pi_Q \ \cdot \ \pi_L  $                                                                            \\ \hline
\textbf{IC BH1750}            & $\lambda_p \ = \lambda_{BD} \ \cdot \ \pi_{MFG} \ \cdot \ \pi_T \ \cdot \ \pi_{CD} \ + \ \lambda_{BP} \ \cdot \ \pi_E \ \cdot \ \pi_Q + \lambda_{EOS}$                         \\ \hline
\textbf{Shield}               & $\lambda_p \ = \ \lambda_b \ \cdot \  \pi_T \ \cdot \ \pi_K  \ \cdot \ \pi_Q \ \cdot \ \pi_E $                                                                                 \\ \hline
\textbf{Conexionado Sensores} & $\lambda_p \ = \ \lambda_b \ \cdot \  \pi_T \ \cdot \ \pi_K  \ \cdot \ \pi_Q \ \cdot \ \pi_E $                                                                                 \\ \hline
\textbf{IC DS1307}            & $\lambda_p \ = \lambda_{BD} \ \cdot \ \pi_{MFG} \ \cdot \ \pi_T \ \cdot \ \pi_{CD} \ + \ \lambda_{BP} \ \cdot \ \pi_E \ \cdot \ \pi_Q + \lambda_{EOS}$                         \\ \hline
\textbf{Diodo}                & $\lambda_p \ = \ \lambda_b \ \cdot \  \pi_T \ \cdot \ \pi_S  \ \cdot \ \pi_C \ \cdot \ \pi_Q \ \cdot \ \pi_E $                                                                 \\ \hline
\textbf{Regulador de Tensión} & $\lambda_p \ = \ \lambda_b \ \cdot \  \pi_T \ \cdot \ \pi_S  \ \cdot \ \pi_C \ \cdot \ \pi_Q \ \cdot \ \pi_E $                                                                 \\ \hline
\textbf{Transistor Mosfet}    & $\lambda_p \ = \ \lambda_b \ \cdot \  \pi_T \ \cdot \ \pi_A  \ \cdot \ \pi_R \ \cdot \ \pi_S \ \cdot \ \pi_Q \ \cdot \ \pi_E $                                                 \\ \hline
\textbf{VHSIC}                & \cellcolor[HTML]{FFFFFF}$\lambda_p \ = \lambda_{BD} \ \cdot \ \pi_{MFG} \ \cdot \ \pi_T \ \cdot \ \pi_{CD} \ + \ \lambda_{BP} \ \cdot \ \pi_E \ \cdot \ \pi_Q + \lambda_{EOS}$ \\ \hline
\textbf{Batería}              & \multicolumn{1}{c|}{Documentación}                                                                                                                                             \\ \hline
\textbf{Panel Solar}          & \multicolumn{1}{c|}{Documentación}                                                                                                                                             \\ \hline
\textbf{Cámara \rspi}          & \multicolumn{1}{c|}{Documentación}                                                                                                                                             \\ \hline
\textbf{Inductor}             & \multicolumn{1}{c|}{\cellcolor[HTML]{FFFFFF}$\lambda_p \ = \ \lambda_b \ \cdot \ \pi_T  \ \pi_Q \ \cdot \ \pi_E$}                                                              \\ \hline
\textbf{ESP8266}              & $\lambda_p \ = \  (C_1 \ \cdot \ \pi_T \ + \ C_2 \ \cdot \ \pi_E ) \cdot \ \pi_Q \ \cdot \ \pi_L  $                                                                            \\ \hline
\textbf{\rspi}                & \multicolumn{1}{c|}{Documentación}                                                                                                                                             \\ \hline
\end{tabular}
\caption{Ecuaciones para obtener la tasa de fallos de cada módulo acorde a MIL-HDBK-217F.}
\label{tasadefallos}
\end{table}

\Subsubsection{\rspi}
Para el módulo \rspi se utiliza la documentación de esta para obtener el valor de la tasa de fallos.
\begin{equation}
\lambda_p = 3 
\end{equation}
\Subsubsection{Regulador de Energía}
\begin{table}[H]
\centering
\begin{tabular}{|c|ccc|}
\hline
\textbf{Componente}          & \multicolumn{1}{c|}{\textbf{Cantidad}} & \multicolumn{1}{c|}{$\boldsymbol{\lambda_p}$}        & $\boldsymbol{\lambda_{Tot}}$ \\ \hline
\textbf{Capacitor}           & \multicolumn{1}{c|}{9}                 & \multicolumn{1}{c|}{\cellcolor[HTML]{FFFFFF}0.00356} & 0.03204                      \\ \hline
\textbf{Resistor}            & \multicolumn{1}{c|}{36}                & \multicolumn{1}{c|}{\cellcolor[HTML]{FFFFFF}0.00267} & 0.09612                      \\ \hline
\textbf{Diodo}               & \multicolumn{1}{c|}{7}                 & \multicolumn{1}{c|}{\cellcolor[HTML]{FFFFFF}0.0007}  & 0.0049                       \\ \hline
\textbf{Inductor}            & \multicolumn{1}{c|}{2}                 & \multicolumn{1}{c|}{0.06138}                         & 0.12276                      \\ \hline
\textbf{Transistores MOSFET} & \multicolumn{1}{c|}{13}                & \multicolumn{1}{c|}{0.1776}                          & 2.3088                       \\ \hline
\textbf{IC Step-Down}        & \multicolumn{1}{c|}{1}                 & \multicolumn{1}{c|}{1.106}                           & 1.106                        \\ \hline
\textbf{IC MPPT}             & \multicolumn{1}{c|}{1}                 & \multicolumn{1}{c|}{1.017}                           & 1.017                        \\ \hline
\textbf{IC Protocolo USB}    & \multicolumn{1}{c|}{1}                 & \multicolumn{1}{c|}{1.004}                           & 1.004                        \\ \hline
\textbf{Total}               & \multicolumn{1}{l}{}                   & \multicolumn{1}{l}{}                                 & \multicolumn{1}{r|}{5.69162} \\ \hline
\end{tabular}
\caption{Confiabilidad regulador de energía.}
\label{confReg}
\end{table}

\Subsubsection{Paneles Solares}
Para determinar a tasa de fallas de los paneles solares se utiliza la documentación de estos.
\begin{equation}
\lambda_p = 0.057 
\end{equation}

\Subsubsection{Baterías}
Para determinar a tasa de fallas de las baterías se utiliza la documentación.
\begin{equation}
\lambda_p = 0.005 
\end{equation}
\Subsubsection{Conector Shield}
\begin{table}[H]
\centering
\begin{tabular}{|c|ccc|}
\hline
\textbf{Componente}     & \multicolumn{1}{c|}{\textbf{Cantidad}} & \multicolumn{1}{c|}{$\boldsymbol{\lambda_p}$}        & $\boldsymbol{\lambda_{Tot}}$ \\ \hline
\textbf{Conectores PCB} & \multicolumn{1}{c|}{1}                 & \multicolumn{1}{c|}{\cellcolor[HTML]{FFFFFF}0.00182} & 0.00182                      \\ \hline
\textbf{Conector Molex} & \multicolumn{1}{c|}{1}                 & \multicolumn{1}{c|}{\cellcolor[HTML]{FFFFFF}0.00182} & 0.00182                      \\ \hline
\textbf{Total}          & \multicolumn{1}{l}{}                   & \multicolumn{1}{l}{\cellcolor[HTML]{FFFFFF}}         & \multicolumn{1}{r|}{0.00364} \\ \hline
\end{tabular}
\caption{Confiabilidad de la placa \textit{shield}.}
\label{confshield}
\end{table}

\Subsubsection{RTC}
% Please add the following required packages to your document preamble:
% \usepackage[table,xcdraw]{xcolor}
% If you use beamer only pass "xcolor=table" option, i.e. \documentclass[xcolor=table]{beamer}
\begin{table}[H]
\centering
\begin{tabular}{|c|ccc|}
\hline
\textbf{Componente} & \multicolumn{1}{c|}{\textbf{Cantidad}} & \multicolumn{1}{c|}{$\boldsymbol{\lambda_p}$}        & $\boldsymbol{\lambda_{Tot}}$ \\ \hline
\textbf{Capacitor}  & \multicolumn{1}{c|}{3}                 & \multicolumn{1}{c|}{\cellcolor[HTML]{FFFFFF}0.00356} & 0.01068                      \\ \hline
\textbf{Resistor}   & \multicolumn{1}{c|}{5}                 & \multicolumn{1}{c|}{\cellcolor[HTML]{FFFFFF}0.00267} & 0.01335                      \\ \hline
\textbf{Diodo}      & \multicolumn{1}{c|}{1}                 & \multicolumn{1}{c|}{\cellcolor[HTML]{FFFFFF}0.0007}  & 0.0007                       \\ \hline
\textbf{DS1307}     & \multicolumn{1}{c|}{1}                 & \multicolumn{1}{c|}{1.106}                           & 1.106                        \\ \hline
\textbf{Total}      & \multicolumn{1}{l}{}                   & \multicolumn{1}{l}{}                                 & \multicolumn{1}{r|}{1.13073} \\ \hline
\end{tabular}
\caption{Confiabilidad RTC.}
\label{confRTC}
\end{table}
\Subsubsection{Sensor de Presencia}
% Please add the following required packages to your document preamble:
% \usepackage[table,xcdraw]{xcolor}
% If you use beamer only pass "xcolor=table" option, i.e. \documentclass[xcolor=table]{beamer}
\begin{table}[H]
\centering
\begin{tabular}{|c|ccc|}
\hline
\textbf{Componente}     & \multicolumn{1}{c|}{\textbf{Cantidad}} & \multicolumn{1}{c|}{$\boldsymbol{\lambda_p}$}     & $\boldsymbol{\lambda_{Tot}}$ \\ \hline
\textbf{ESP32 WROOM S3} & \multicolumn{1}{c|}{1}                 & \multicolumn{1}{c|}{\cellcolor[HTML]{FFFFFF}1.08} & 1.08                         \\ \hline
\textbf{Total}          & \multicolumn{1}{l}{}                   & \multicolumn{1}{l}{\cellcolor[HTML]{FFFFFF}}      & \multicolumn{1}{r|}{1.08}    \\ \hline
\end{tabular}
\caption{Confiabilidad sensor de presencia.}
\label{tab:confpres}
\end{table}
\Subsubsection{Cámara \rspi}
Para determinar la tasa de fallas del módulo de cámara se recurre a la hoja de datos.
\begin{equation}
\lambda_p = 3.16
\end{equation}
\Subsubsection{Conector Sensores}
\begin{table}[H]
\centering
\begin{tabular}{|c|clc|}
\hline
\textbf{Componente}     & \multicolumn{1}{c|}{\textbf{Cantidad}} & \multicolumn{1}{c|}{$\boldsymbol{\lambda_p}$} & $\boldsymbol{\lambda_{Tot}}$  \\ \hline
\textbf{Conector Molex} & \multicolumn{1}{c|}{1}                 & \multicolumn{1}{r|}{0.00182}              & 0.00182                      \\ \hline
\textbf{Total}          & \multicolumn{1}{l}{}                   &                                           & \multicolumn{1}{r|}{0.00182} \\ \hline
\end{tabular}
\caption{Confiabilidad Conector Placa de Sensores}
\label{confsensores}
\end{table}
\Subsubsection{Sensor Humedad y Temperatura}
% Please add the following required packages to your document preamble:
% \usepackage[table,xcdraw]{xcolor}
% If you use beamer only pass "xcolor=table" option, i.e. \documentclass[xcolor=table]{beamer}
\begin{table}[H]
\centering
\begin{tabular}{|c|crc|}
\hline
\textbf{Componente}         & \multicolumn{1}{c|}{\textbf{Cantidad}} & \multicolumn{1}{c|}{$\boldsymbol{\lambda_p}$}        & $\boldsymbol{\lambda_{Tot}}$ \\ \hline
\textbf{Capacitor} & \multicolumn{1}{c|}{2}                 & \multicolumn{1}{r|}{0.00356}                         & 0.00712                      \\ \hline
\textbf{Resistor}  & \multicolumn{1}{c|}{1}                 & \multicolumn{1}{r|}{\cellcolor[HTML]{FFFFFF}0.00267} & 0.00267                      \\ \hline
\textbf{IC-DHT22}  & \multicolumn{1}{c|}{1}                 & \multicolumn{1}{r|}{3.036}                           & 3.036                        \\ \hline
\textbf{Total}     & \multicolumn{1}{l}{}                   & \multicolumn{1}{l}{}                                 & \multicolumn{1}{r|}{3.04579} \\ \hline
\end{tabular}
\caption{Confiabilidad Sensor de Temperatura y Humedad.}
\label{tab:conftemphum}
\end{table}
\Subsubsection{Sensor Luminosidad}

\begin{table}[H]
\centering
\begin{tabular}{|c|crc|}
\hline
\textbf{Componente}           & \multicolumn{1}{c|}{\textbf{Cantidad}} & \multicolumn{1}{c|}{$\boldsymbol{\lambda_p}$}        & $\boldsymbol{\lambda_{Tot}}$ \\ \hline
\textbf{Capacitor}            & \multicolumn{1}{c|}{4}                 & \multicolumn{1}{r|}{0.00356}                         & 0.01424                      \\ \hline
\textbf{Resistor}             & \multicolumn{1}{c|}{3}                 & \multicolumn{1}{r|}{\cellcolor[HTML]{FFFFFF}0.00267} & 0.00801                      \\ \hline
\textbf{Regulador de tensión} & \multicolumn{1}{c|}{1}                 & \multicolumn{1}{r|}{\cellcolor[HTML]{FFFFFF}0.00059} & 0.00059                      \\ \hline
\textbf{IC-BH1750}            & \multicolumn{1}{c|}{1}                 & \multicolumn{1}{r|}{1.106}                           & 1.106                        \\ \hline
\textbf{Total}                & \multicolumn{1}{l}{}                   & \multicolumn{1}{l}{}                                 & \multicolumn{1}{r|}{1.12884} \\ \hline
\end{tabular}
\caption{Confiabilidad Sensor de Luminosidad}
\label{tab:conflum}
\end{table}

\Subsection{Software}
Para el estudio de confiabilidad de software se utilizó un modelo de estimación de tipo exponencial. Este modelo asume que todas las fallas que se presentan son independientes entre sí. Más específicamente se utilizará el modelo de Shooman.

El modelo de Shooman, que normaliza las fallas por la cantidad de líneas de código $I_T$ sigue:

\begin{equation}
R(t) = e^{-\lambda t}
\end{equation}

donde se define

\begin{equation}
\lambda = -k(\epsilon_T - \epsilon(\zeta))t
\end{equation}

siendo $\epsilon_T$ la tasa de errores totales, $\epsilon(\zeta)$ la tasa de errores corregidos hasta un tiempo de corrección $\zeta$ y k una constante del modelo de estimación.

\begin{table}[H]
\centering
\begin{tabular}{|c|c|c|c|c|c|c|c|c|}
\hline
Semanas &
  $E_{totales}$ &
  $E_{corregidos}$ &
  $E_{residuales}$ &
  \textbf{H (hrs)} &
  \textbf{$\lambda_i$} &
  \textbf{$\frac{\lambda_i}{\lambda_{i-1}}$} &
  $\mathbf{\hat{E}_{tot}}$ &
  $\mathbf{\hat{k}}$ \\ \hline
1 &  &  & \tbc &  &  &  &  &  \\ \hline
2 &  &  &  &  &  &  &  &  \\ \hline
3 &  &  &  &  &  &  &  &  \\ \hline
4 &  &  &  &  &  &  &  &  \\ \hline
5 &  &  &  &  &  &  &  &  \\ \hline
6 &  &  &  &  &  &  &  &  \\ \hline
7 &  &  &  &  &  &  &  &  \\ \hline
8 &  &  &  &  &  &  &  &  \\ \hline
  &  &  & Valores adoptados &  &  &  & xx & xx \\ \hline
\end{tabular}
\caption{Fallas durante el periodo de testing del software.}
\label{tab:confsoft}
\end{table}

La Tabla (\ref{tab:confsoft}) presenta a lo largo del periodo de \textit{testing} la cantidad acumulada de errores $E_{totales}$, la cantidad acumulada de errores corregidos $E_{corregidos}$, la cantidad acumulada resultante de errores residuales $E_{residuales}$, las horas de \textit{testing} acumuladas \textbf{H(hrs)}, la tasa de fallos $\lambda$, y los parámetros invariables del modelo $\hat{E}_{tot}$ y $\hat{k}$, que pueden ser calculados según

\begin{equation}
\hat{E}_{tot} = \frac{ \frac{\lambda_i}{\lambda_{i-1}} E_c(\tau_{i-1})-E_c(\tau_i)}{\frac{\lambda_i}{\lambda_{i-1}}-1}
\end{equation}

y

\begin{equation}
\hat{k} = \lambda_i\frac{I_T}{\hat{E}_{tot}-E_c(\tau_i)}
\end{equation}

Finalmente, se adoptan los valores $\hat{E}_{tot} = $ y $\hat{k} = $. Aproximando según

\begin{equation}
\lambda = k\frac{E_r}{I_T}
\end{equation}

se obtiene $\lambda = $ que, tomando el inverso de este valor se obtiene el $TMEF$, que resulta ser de xx $hs$.

%\end{document}
